<template id="languageListTpl">
    <div ka:for="let curTransKey in translations" class="mt-4">
        <div>
            <span>Original: </span>
            <span kap:textContent="curTransKey" class="fw-bold"></span>
            <span class="text-muted" ka:if="translations[curTransKey]._hint != null">(<span kap:textContent="translations[curTransKey]._hint"></span>)</span>
        </div>
        <div ka:for="let curLang of languages" class="row mt-2">
            <div class="col-4 col-lg-2"><label class="col-form-label" kap:textContent="curLang.name + ' (' + curLang.lang + ')'"></label>:</div>
            <div class="col-8 col-lg-10"><input type="text" class="form-control" kap:bind="translations[curTransKey][curLang.lang]"></div>
        </div>
    </div>
    <nav class="navbar fixed-bottom navbar-light bg-light">
        <div class="container text-end">
            <button class="btn btn-primary ms-auto" kap:on:click="$fn.save()"><i class="bi bi-cloud-arrow-up"></i> Speichern</button>
        </div>
    </nav>

</template>


<script>


    ka_define("language-list", async(self, tpl) => {
        let response =  await api_call("list/pages");


        tpl.render({
            languages: languages,
            translations: translations,
            $fn: {
                save: () => {
                    api_call("files/_data/translations.yml", "POST", translations);
                }
            }
        });


    }, '#languageListTpl');


</script>

<language-list></language-list>
